<?php

require_once '/home/work/bbs/app/controller/smarty_config.php';

Class BBSController
{
    public $base_dir_path = '/home/work/bbs/app/template/';
    public static $log_dir = null;

    public function show()
    {
        self::$log_dir = dirname(__FILE__) . '/../../log/';
        $thread_info = BBS::findAll($log_dir);
        $thread_names = self::getParams($thread_info);
        $template_file = $base_dir_path . 'bbs.html';
        self::render($thread_names, $template_file);
    }
    public static function getParams($thread_names)
    {
        $thread_name_array = array();
        foreach($thread_names as $thread_name)
        {
            $thread_name_array[] = $thread_name;
        }
        return $thread_name_array;
    }

    public static function render($thread_names, $template_file)
    {
        $smarty_config = new SmartyConfig();
        $smarty = $smarty_config->setup();
        $smarty->assign('thread_name', $thread_names);
        $smarty->display($template_file);
    }
}
